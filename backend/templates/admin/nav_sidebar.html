{% load i18n %}
<button class="sticky toggle-nav-sidebar" id="toggle-nav-sidebar" aria-label="{% translate 'Toggle navigation' %}"></button>
<nav class="sticky" id="nav-sidebar" aria-label="{% translate 'Sidebar' %}">
  <input type="search" id="nav-filter"
         placeholder="{% translate 'Start typing to filter…' %}"
         aria-label="{% translate 'Filter navigation items' %}">
  {% if available_apps %}
    {% for app in available_apps %}
      {% if app.app_label == "articles" %}
        <div class="app-{{ app.app_label }} module{% if app.app_url in request.path|urlencode %} current-app{% endif %}">
          <table>
            <caption>
              <a href="{{ app.app_url }}" class="section" title="{% blocktranslate with name=app.name %}Models in the {{ name }} application{% endblocktranslate %}">{{ app.name }}</a>
            </caption>
            <thead class="visually-hidden">
              <tr>
                <th scope="col">{% translate 'Model name' %}</th>
                <th scope="col">{% translate 'Add link' %}</th>
                <th scope="col">{% translate 'Change or view list link' %}</th>
              </tr>
            </thead>
            {% for model in app.models %}
              {% if model.object_name == "ArticleVersion" or model.object_name == "Article" %}
                {% with model_name=model.object_name|lower %}
                  <tr class="model-{{ model_name }}{% if model.admin_url in request.path|urlencode %} current-model{% endif %}">
                    <th scope="row" id="{{ app.app_label }}-{{ model_name }}">
                      {% if model.admin_url %}
                        <a href="{{ model.admin_url }}"{% if model.admin_url in request.path|urlencode %} aria-current="page"{% endif %}>{{ model.name }}</a>
                      {% else %}
                        {{ model.name }}
                      {% endif %}
                    </th>
                    {% if model.add_url %}
                      <td><a href="{{ model.add_url }}" class="addlink" aria-describedby="{{ app.app_label }}-{{ model_name }}">{% translate 'Add' %}</a></td>
                    {% else %}
                      <td></td>
                    {% endif %}
                    <td></td>
                  </tr>
                {% endwith %}
              {% endif %}
            {% endfor %}
          </table>
        </div>

        <div class="app-integrations module">
          <table>
            <caption>
              <span class="section">{% translate 'Integrations' %}</span>
            </caption>
            <thead class="visually-hidden">
              <tr>
                <th scope="col">{% translate 'Model name' %}</th>
                <th scope="col">{% translate 'Add link' %}</th>
                <th scope="col">{% translate 'Change or view list link' %}</th>
              </tr>
            </thead>
            <tr class="nav-subheading">
              <th scope="col" colspan="3">{% translate 'OpenAI' %}</th>
            </tr>
            {% for model in app.models %}
              {% if model.object_name == "OpenAIConfig" %}
                {% with model_name=model.object_name|lower %}
                  <tr class="model-{{ model_name }}{% if model.admin_url in request.path|urlencode %} current-model{% endif %}">
                    <th scope="row" id="{{ app.app_label }}-{{ model_name }}">
                      {% if model.admin_url %}
                        <a href="{{ model.admin_url }}"{% if model.admin_url in request.path|urlencode %} aria-current="page"{% endif %}>{{ model.name }}</a>
                      {% else %}
                        {{ model.name }}
                      {% endif %}
                    </th>
                    {% if model.add_url %}
                      <td><a href="{{ model.add_url }}" class="addlink" aria-describedby="{{ app.app_label }}-{{ model_name }}">{% translate 'Add' %}</a></td>
                    {% else %}
                      <td></td>
                    {% endif %}
                    <td></td>
                  </tr>
                {% endwith %}
              {% endif %}
            {% endfor %}
          </table>
        </div>
      {% else %}
        <div class="app-{{ app.app_label }} module{% if app.app_url in request.path|urlencode %} current-app{% endif %}">
          <table>
            <caption>
              <a href="{{ app.app_url }}" class="section" title="{% blocktranslate with name=app.name %}Models in the {{ name }} application{% endblocktranslate %}">{{ app.name }}</a>
            </caption>
            <thead class="visually-hidden">
              <tr>
                <th scope="col">{% translate 'Model name' %}</th>
                <th scope="col">{% translate 'Add link' %}</th>
                <th scope="col">{% translate 'Change or view list link' %}</th>
              </tr>
            </thead>
            {% for model in app.models %}
              {% with model_name=model.object_name|lower %}
                <tr class="model-{{ model_name }}{% if model.admin_url in request.path|urlencode %} current-model{% endif %}">
                  <th scope="row" id="{{ app.app_label }}-{{ model_name }}">
                    {% if model.admin_url %}
                      <a href="{{ model.admin_url }}"{% if model.admin_url in request.path|urlencode %} aria-current="page"{% endif %}>{{ model.name }}</a>
                    {% else %}
                      {{ model.name }}
                    {% endif %}
                  </th>
                  {% if model.add_url %}
                    <td><a href="{{ model.add_url }}" class="addlink" aria-describedby="{{ app.app_label }}-{{ model_name }}">{% translate 'Add' %}</a></td>
                  {% else %}
                    <td></td>
                  {% endif %}
                  <td></td>
                </tr>
              {% endwith %}
            {% endfor %}
          </table>
        </div>
      {% endif %}
    {% endfor %}
  {% else %}
    <p>{% translate 'You don’t have permission to view or edit anything.' %}</p>
  {% endif %}
</nav>
